<!DOCTYPE html>
<html class="no-js" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/main">
	
	<!-- jquery head 부분 넣는곳 -->
	<th:block layout:fragment="customHead">
		<meta charset="UTF-8">
		<title>myProject</title>
		<th:block th:include="layout/customHead"></th:block>
				
		<meta http-equiv="Content-Type" content="text/html</td> charset=UTF-8" />
		<title>leaveCategoryList.html</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
		<style>
		    .icon-list-wrap .icon-list-item i {
		        float: left;
		        text-align: center;
		        border-radius: .1875rem;
		        margin-right: 1rem;
		        margin-bottom: 1.5rem;
		        font-size: 1.5rem;
		        -webkit-transition: all .2s ease-in-out;
		        -o-transition: all .2s ease-in-out;
		        -moz-transition: all .2s ease-in-out;
		        transition: all .2s ease-in-out;
		    }
		</style>
		<script>
			$(document).ready(function(){
				
				$('#addMyAcademyBtn').click(function(){
					console.log('추가 버튼 테스트 : '+$(this).attr('value'));
					
					for (var i = 1; i < 13; i++) { /* 월 선택 */
						if(i <10) {
							$("#startMonth").append('<option value="0'+i+'">'+i+'</option>');
						} else {
							$("#startMonth").append('<option value="'+i+'">'+i+'</option>');
						}
					}
					
					for (var i = 1; i < 32; i++) { /* 일 선택 */
						if(i <10) {
							$("#startDay").append('<option value="0'+i+'">'+i+'</option>');
						} else {
							$("#startDay").append('<option value="'+i+'">'+i+'</option>');
						}
					}
					
					for (var i = 1; i < 13; i++) { /* 월 선택 */
						if(i <10) {
							$("#endMonth").append('<option value="0'+i+'">'+i+'</option>');
						} else {
							$("#endMonth").append('<option value="'+i+'">'+i+'</option>');
						}
					}
					
					for (var i = 1; i < 32; i++) { /* 일 선택 */
						if(i <10) {
							$("#endDay").append('<option value="0'+i+'">'+i+'</option>');
						} else {
							$("#endDay").append('<option value="'+i+'">'+i+'</option>');
						}
					}
				
					$('#saveBtn').click(function(){
					console.log('저장 버튼 테스트 ');
					
					let memberAcademyName = $('#academyName').val(); //교육명
					let memberAcademyComplete = $('#academyComplete').val(); //이수현황 
					let memberAcademyInstitution = $('#academyInstitution').val(); //교육기관
					let memberAcademyCost = $('#academyCost').val(); //교육비
					let memberAcademyPlace = $('#academyPlace').val(); //교육장소
					let memberAcademyStartDay = $('#startYear').val() + '-' + $('#startMonth').val() + '-' + $('#startDay').val(); //시작날
					let memberAcademyEndDay = $('#endYear').val() + '-' + $('#endMonth').val() + '-' + $('#endDay').val(); //종료날
					let memberAcademyPurpose = $('#academyPurpose').val(); //교육목적
					let memberAcademyDesc = $('#academyDesc').val(); //기타내용
			 
				 /*	let selectFile = $('#selectFile').val(); // MultipartFile 인터페이스에 담을 파일값 
				 	let memberFilesType = $('#filesType').val(); // 파일 타입   */
				 	
				/*  	let memberFilesInfo = $('#memberFileInfo').val();  // 뷰쪽 타이틀정보를 담음  */
					
					console.log('값출력 '+$('#academyName').val() + ' 변수값 확인 비교 : '+ memberAcademyName);
					console.log('값출력 '+$('#academyComplete').val() + ' 변수값 확인 비교 : '+ memberAcademyComplete);
					console.log('값출력 '+$('#academyInstitution').val() + ' 변수값 확인 비교 : '+ memberAcademyInstitution);
					console.log('값출력 '+$('#academyCost').val() + ' 변수값 확인 비교 : '+ memberAcademyCost);
					console.log('값출력 '+$('#academyPlace').val() + ' 변수값 확인 비교 : '+ memberAcademyPlace);
					console.log("교육기간 시작날짜 : " + memberAcademyStartDay);
					console.log("교육기간 종료날짜 : " + memberAcademyEndDay);
					console.log('값출력 '+$('#academyPurpose').val() + ' 변수값 확인 비교 : '+ memberAcademyPurpose);
					console.log('값출력 '+$('#academyDesc').val() + ' 변수값 확인 비교 : '+ memberAcademyDesc);
				 	
					/* console.log('값출력 '+$('#selectFile').val() + ' 변수값 확인 비교 : '+ selectFile);
					console.log('값출력 '+$('#filesType').val() + ' 변수값 확인 비교 : '+ memberFilesType);
					 */
					/* console.log('값출력 '+$('#memberFileInfo').val() +' 변수값 확인 비교 : '+ memberFilesInfo);  */
					
					
					
						$.ajax({
							url : '/member/memberMyProfile/addmyAcademy',
							type : 'get',
							data : {
								memberAcademyName:memberAcademyName,
								memberAcademyComplete:memberAcademyComplete,
								memberAcademyCost:memberAcademyCost,
								memberAcademyInstitution:memberAcademyInstitution,
								memberAcademyPlace:memberAcademyPlace,
								memberAcademyStartDay:memberAcademyStartDay,
								memberAcademyEndDay:memberAcademyEndDay,
								memberAcademyPurpose:memberAcademyPurpose,
								memberAcademyDesc:memberAcademyDesc
								
							/* 	selectFile:selectFile,
								memberFilesType:memberFilesType, */
							/* 	memberFilesInfo:memberFilesInfo */
								
							},
							success : function(){
								console.log('성공')
						/* 	$('#closeBtn').trigger("click"); 닫기버튼클릭  */
								location.reload();  // 새로고침
							},
							error : function(error){
								console.log(error);
								//alert('실패 : '+error);
							}
						});
					
					
					});
					
					
				});
				
			});
		
		
		</script>
	</th:block>
	
	<!-- 본문 -->
	<th:block layout:fragment="customBody">
		<h2>나의 정보 - 나의 인사 정보</h2>
		<br/>
		
		<div class="row">
			<div class="col-2" style="padding-left:50px; border-right: 1px solid #ccc;">
				<div class="card">
					<div class="card-header">MyProfile</div>
					<div class="card-body">
						<div>
							<a href="/member/memberMyProfile/myProfile">개인 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myInfo">인사 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myCareer">경력 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myProject">프로젝트 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myEducation">학력 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myAcademy">교육 이력 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myLicense">자격증 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myAwards">수상 이력 정보</a>
						</div>
					
					</div>
				</div>
			</div>	

			
			<div class="col-10" style="padding-right:20px; border-right: 1px solid #ccc;">
				<div class="card">
					<div class="card-header justify-content-between" style="padding: 10px;">
					    <div style="padding: 0px 0px 0px 10px">나의 인사 정보</div>
					    
					    <!-- 팝업창 추가 버튼 -->
					    <div class="icon-list-wrap">
					        <div class="icon-list-item">
					            <a id="addMyAcademyBtn" data-toggle="modal" data-target="#detailModal" class="btn pull-right" href="#" style="padding: 0;" >
					                <i class="ik ik-plus-square"></i>
					            </a>
					        </div>
					    
					    </div>
					</div>	
					<div class="card-body" >
						<div  th:each="myAcademy : ${myAcademy}">	
							<div class="input-group">
								<!-- 교육 시작일자 -->
								<div th:text="|기간 - ${myAcademy.memberAcademyStartDay}|"></div>
								<!-- 교육 종료일자 및 진행중 -->
								<div th:if="${myAcademy.memberAcademyEndDay != null}" th:text="|&nbsp; ~ ${myAcademy.memberAcademyEndDay}|"></div>
								<div th:unless="${myAcademy.memberAcademyEndDay != null}">
									<div>&nbsp; ~ 진행중</div>
								</div>
							</div>
							<div th:text="|교육 과정명 : ${myAcademy.memberAcademyName}|"></div>							
							<div th:if="${myAcademy.memberAcademyComplete == 'Y'}">
								<div>교육 수료 상태 : 이수</div>
							</div>
							<!-- else 조건 -->
							<div th:unless="${myAcademy.memberAcademyComplete == 'Y'}">
								<div class="input-group">
									<div>교육 수료 상태 : 미이수</div>
								</div>
							</div>
							
							
							<div th:text="|교육 기관 : ${myAcademy.memberAcademyInstitution}|"></div>
							<div th:text="|교육 장소 : ${myAcademy.memberAcademyPlace}|"></div>
							<div th:text="|교육 목적 : ${myAcademy.memberAcademyPurpose}|"></div>
							<div th:text="|교육비 : ${myAcademy.memberAcademyCost}원|"></div>
							<div th:text="|기타 내용 : ${myAcademy.memberAcademyDesc}|"></div>
							
							<!-- if 조건 데이터가 공백이면 파일없음 -->
							<div th:if="${myAcademy.memberFilesSaveName == '' || myAcademy.memberFilesSaveName == null} ">
								<div>첨부파일 : 파일없음</div>
							</div>
							<!-- else 조건 -->
							<div th:unless="${myAcademy.memberFilesSaveName == '' || myAcademy.memberFilesSaveName == null}">
								<div class="input-group">
									<div>첨부파일 : </div>
									<a href="#" th:text="|&nbsp; ${myAcademy.memberFilesSaveName}|"></a>
								</div>
							</div>
							<div  align="right" style="height: 100px; padding:20px"><button>수정</button> <button>삭제</button></div>
							<hr>
						</div>	 





						<!-- 팝업 화면 출력  -->
						<div class="modal" id="detailModal">
							<div class="modal-dialog modal-dialog-scrollable modal-dialog modal-lg">
								<div class="modal-content">
								
									<!-- Modal Header -->
									<div class="modal-header">
										<h2 class="modal-title">교육 이력정보 입력</h2>
										<button type="button" class="close" data-dismiss="modal">×</button>
									</div>
									
									<!-- Modal body -->
									<div class="modal-body">
										<form class="academyBodyForm">
										
											<!-- 과정명 카드영역 시작 -->
											<div class="card">
												<div class="card-header"><h3>교육 과정명</h3></div>
												<div class="card-body">
													<div><input type="text" id="academyName" class="form-control"></div>
												</div>
											</div> <!-- 과정명 카드영역 끝 -->
										
											<!-- 교육 수료 상태 시작 -->
											<div class="card">
												<div class="card-header"><h3>교육 수료 상태</h3></div>
												<div class="card-body">
												<select id="academyComplete" class="form-control">
													<option value="Y">수료
													<option value="N">미수료
												</select>
												</div>
											</div> <!-- 교육 수료 상태 끝 -->
											
											<!-- 교육 기간 시작 -->
											<div class="card">
												<div class="card-header"><h3>교육 기간</h3></div>
												<div class="card-body">
													<div class="input-group">

														<input type="text" id="startYear" class="form-control col-sm-1"><h4>&nbsp;년&nbsp;</h4>
														
														<select id="startMonth" class="form-control col-sm-1">
															<!-- 스크립트 반복문으로 뿌려준다 01~12까지 뿌려준다 -->
														</select> <h4>&nbsp;월&nbsp;</h4>
														
														<select id="startDay" class="form-control col-sm-1">
															<!-- 스크립트 반복문으로 뿌려준다 01~31까지 뿌려준다 -->
														</select> <h4>&nbsp;일&nbsp;</h4>
														
														<h4>&nbsp;~&nbsp;</h4>
														
														<input type="text" id="endYear" class="form-control col-sm-1"><h4>&nbsp;년&nbsp;</h4>
														
														<select id="endMonth" class="form-control col-sm-1">
															<!-- 스크립트 반복문으로 뿌려준다 01~12까지 뿌려준다 -->
														</select> <h4>&nbsp;월&nbsp;</h4>
														
														<select id="endDay" class="form-control col-sm-1">
															<!-- 스크립트 반복문으로 뿌려준다 01~31까지 뿌려준다 -->
														</select> <h4>&nbsp;일&nbsp;</h4>
														
													</div>
												</div>
											</div> <!-- 교육 기간  끝 -->
											
											<!-- 교육 기관 시작 -->
											<div class="card">
												<div class="card-header"><h3>교육 기관</h3></div>
												<div class="card-body">
													<div>
														<input type="text" id="academyInstitution" class="form-control">
													</div>
												</div>
											</div> <!-- 교육 기관 끝 -->
											
											<!-- 교육비 시작 -->
											<div class="card">
												<div class="card-header"><h3>교육비</h3></div>
												<div class="card-body">
													<div>
														<input type="number" id="academyCost" class="form-control">
													</div>
												</div>
											</div> <!-- 교육비 끝 -->
											
											<!-- 교육장소 시작 -->
											<div class="card">
												<div class="card-header"><h3>교육 장소</h3></div>
												<div class="card-body">
													<div>
														<input type="text" id="academyPlace" class="form-control">
													</div>
												</div>
											</div> <!-- 교육장소 끝 -->
											
											<!-- 교육 목적 시작 -->
											<div class="card">
												<div class="card-header"><h3>교육 목적</h3></div>
												<div class="card-body">
													<div>
														<input type="text" id="academyPurpose" class="form-control">
													</div>
												</div>
											</div> <!-- 교육 목적 끝 -->
										
											<!-- 교육 목적 시작 -->
											<div class="card">
												<div class="card-header"><h3>기타내용</h3></div>
												<div class="card-body">
													<div>
														<input type="text" id="academyDesc" class="form-control">
													</div>
												</div>
											</div> <!-- 교육 목적 끝 -->
											
										</form>
									</div>	
									
									
									<!-- Modal footer -->
									<div class="modal-footer"> 
										<form id="academyFooterForm">
								       <!--      <input class="form-control" name="selectFile" id="selectFile" type="file"/> 파일첨부								            
											 파일타입<select id="filesType" class="form-control col-sm-1">  
												<option value="파일">파일</option>
												<option value="사진">사진</option>
												<option value="음악">음악</option>
												<option value="동영상">동영상</option>
											</select>	
											 -->
											<div class="input-group" style="margin: 0px 0px 0px 10px; padding: 0px 0px 0px 0px">
												<button id="saveBtn" type="button" class="btn btn-primary">저장</button>
												&nbsp;
												<button id="closeBtn" type="button" class="btn btn-light" data-dismiss="modal">취소</button> 
												<div id="memberFileInfo" hidden="hidden" th:value="교육이력정보"></div> <!-- 파일테이블에서 사용할 뷰쪽 타이틀정보 -->
											</div>
										</form>
									</div>	
								</div>
							</div>
						</div>
                     </div>    
					</div>
				</div>
			</div>

			
		
	</th:block>
	
	<th:block layout:fragment="customJquery">
		<th:block th:include="layout/customJquery"></th:block>
	</th:block>
	
</html>
