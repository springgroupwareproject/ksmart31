<!DOCTYPE html>
<html class="no-js" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/main">
	
	<!-- jquery head 부분 넣는곳 -->
	<th:block layout:fragment="customHead">
		<meta charset="UTF-8">
		<title>myProject</title>
		<th:block th:include="layout/customHead"></th:block>
				
		<meta http-equiv="Content-Type" content="text/html</td> charset=UTF-8" />
		<title>leaveCategoryList.html</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
		<style> /* 추가버튼 스타일 */
		    .icon-list-wrap .icon-list-item i {
		        float: left;
		        text-align: center;
		        border-radius: .1875rem;
		        margin-right: 1rem;
		        margin-bottom: 1.5rem;
		        font-size: 1.5rem;
		        -webkit-transition: all .2s ease-in-out;
		        -o-transition: all .2s ease-in-out;
		        -moz-transition: all .2s ease-in-out;
		        transition: all .2s ease-in-out;
		    }
		</style>
		
		<script>
			$(document).ready(function(){
				
				$('#addBtn').click(function(){	// 입력버튼 클릭시
					console.log('추가 버튼 테스트 : '+$(this).attr('value'));
					
					$("#memberProjectResult").change(function(){
				        if($("#memberProjectResult").is(":checked")){
				        	$("#range").hide();
				        	$("#endYear").hide(); $('#endYear').empty();
				        	$("#endMonth").hide(); $('#endMonth').empty();
				        	$("#endDay").hide(); $('#endDay').empty();
				        	$("#Year").hide();
				        	$("#Month").hide();
				        	$("#Day").hide();
				        }else{
				        	for (var i = 1; i < 13; i++) { /* 시간 시작 월 선택 */  
								if(i <10) {
									$("#startMonth").append('<option value="0'+i+'">'+i+'</option>');
								} else {
									$("#startMonth").append('<option value="'+i+'">'+i+'</option>');
								}
							}
							
							for (var i = 1; i < 32; i++) { /* 기간 시작 일 선택 */
								if(i <10) {
									$("#startDay").append('<option value="0'+i+'">'+i+'</option>');
								} else {
									$("#startDay").append('<option value="'+i+'">'+i+'</option>');
								}
							}
							
							for (var i = 1; i < 13; i++) { /* 기간 종료 월 선택 */
								if(i <10) {
									$("#endMonth").append('<option value="0'+i+'">'+i+'</option>');
								} else {
									$("#endMonth").append('<option value="'+i+'">'+i+'</option>');
								}
							}
							
							for (var i = 1; i < 32; i++) { /* 기간 종료 일 선택 */
								if(i <10) {
									$("#endDay").append('<option value="0'+i+'">'+i+'</option>');
								} else {
									$("#endDay").append('<option value="'+i+'">'+i+'</option>');
								}
							}
							
				        	$("#range").show();
				        	$("#endYear").show();
				        	$("#endMonth").show();
				        	$("#endDay").show();
				        	$("#Year").show();
				        	$("#Month").show();
				        	$("#Day").show();
				        	
				        	
				        } /* else 종료 */
				    }); /* change 이벤트 종료 */
				
					for (var i = 1; i < 13; i++) { /* 시간 시작 월 선택 */  
						if(i <10) {
							$("#startMonth").append('<option value="0'+i+'">'+i+'</option>');
						} else {
							$("#startMonth").append('<option value="'+i+'">'+i+'</option>');
						}
					}
					
					for (var i = 1; i < 32; i++) { /* 기간 시작 일 선택 */
						if(i <10) {
							$("#startDay").append('<option value="0'+i+'">'+i+'</option>');
						} else {
							$("#startDay").append('<option value="'+i+'">'+i+'</option>');
						}
					}
					
					for (var i = 1; i < 13; i++) { /* 기간 종료 월 선택 */
						if(i <10) {
							$("#endMonth").append('<option value="0'+i+'">'+i+'</option>');
						} else {
							$("#endMonth").append('<option value="'+i+'">'+i+'</option>');
						}
					}
					
					for (var i = 1; i < 32; i++) { /* 기간 종료 일 선택 */
						if(i <10) {
							$("#endDay").append('<option value="0'+i+'">'+i+'</option>');
						} else {
							$("#endDay").append('<option value="'+i+'">'+i+'</option>');
						}
					}
				
					
					$('#saveBtn').click(function(){
						console.log('저장 버튼 테스트 ');
							
						let memberProjectName = $('#memberProjectName').val(); // 프로젝트 명
						let memberProjectPlace = $('#memberProjectPlace').val(); // 수행처
						let memberProjectStartDay = $('#startYear').val() + '-' + $('#startMonth').val() + '-' + $('#startDay').val(); // 프로젝트 시작일
						let memberProjectEndDay = $('#endYear').val() + '-' + $('#endMonth').val() + '-' + $('#endDay').val(); // 프로젝트 종료일
						let memberProjectDesc = $('#memberProjectDesc').val(); // 프로젝트 설명
						let memberProjectUrl = $('#memberProjectUrl').val(); // 프로젝트 정보의 위치
				 
					 /*	let selectFile = $('#selectFile').val(); // MultipartFile 인터페이스에 담을 파일값 
					 	let memberFilesType = $('#filesType').val(); // 파일 타입   */
					 	
					/*  let memberFilesInfo = $('#memberFileInfo').val();  // 뷰쪽 타이틀정보를 담음  */
						
						console.log('프로젝트 명 입력값 출력 :'+$('#memberProjectName').val() + ' 변수값 확인 비교 : '+ memberProjectName);
						console.log('수행처 값출력 :'+$('#memberProjectPlace').val() + ' 변수값 확인 비교 : '+ memberProjectPlace);
						console.log("프로젝트 시작 날짜 : " + memberProjectStartDay);
						console.log("프로젝트  종료 날짜 : " + memberProjectEndDay);
						console.log('설명text값 : '+$('#memberProjectDesc').val() + ' 변수값 확인 비교 : '+ memberProjectDesc);
						console.log('URL 값출력 :'+$('#memberProjectUrl').val() + ' 변수값 확인 비교 : '+ memberProjectUrl);
						
						
							$.ajax({
								url : '/member/memberMyProfile/addMyAwards',
								type : 'get',
								data : {
									memberProjectName:memberProjectName,
									memberProjectPlace:memberProjectPlace,
									memberProjectStartDay:memberProjectStartDay,
									memberProjectEndDay:memberProjectEndDay,
									memberProjectDesc:memberProjectDesc,
									memberProjectUrl:memberProjectUrl
								},
								success : function(){
									console.log('성공')
							/* 	$('#closeBtn').trigger("click"); 닫기버튼클릭  */
									location.reload();  // 새로고침
								},
								error : function(error){
									console.log(error);
									//alert('실패 : '+error);
								}
							});
					
					
					});
					
					
				});
				
			});
		
		
		</script>
		
	</th:block>
	
	<!-- 본문 -->
	<th:block layout:fragment="customBody">
		<h2>나의 정보 - 나의 인사 정보</h2>
		<br/>
		
		<div class="row">
			<div class="col-2" style="padding-left:50px; border-right: 1px solid #ccc;">
				<div class="card">
					<div class="card-header">MyProfile</div>
					<div class="card-body">
						<div>
							<a href="/member/memberMyProfile/myProfile">개인 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myInfo">인사 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myEducation">학력 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myProject">프로젝트 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myLicense">자격증 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myAcademy">교육 이력 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myCareer">경력 정보</a>
						</div>
						<hr>
						<div>
							<a href="/member/memberMyProfile/myAwards">수상 이력 정보</a>
						</div>
					</div>
				</div>
			</div>	

			
			<div class="col-10" style="padding-right:20px; border-right: 1px solid #ccc;">
				<div class="card">
					<div class="card-header justify-content-between" style="padding: 10px;">
					    <div style="padding: 0px 0px 0px 10px">나의 프로젝트 정보</div>
					    <!-- 팝업창 추가 버튼 -->
					    <div class="icon-list-wrap">
					        <div class="icon-list-item">
					            <a id="addBtn" data-toggle="modal" data-target="#detailModal" class="btn pull-right" href="#" style="padding: 0;" >
					                <i class="ik ik-plus-square"></i>
					            </a>
					        </div>
					    </div>
					</div>
					<div class="card-body" >
						<div  th:each="myProject : ${myProject}">	
							<div class="input-group">
								<div th:text="|기간 - ${myProject.memberProjectStartDay}|"></div>
								<div th:if="${myProject.memberProjectEndDay != ''}" th:text="|&nbsp; ~ ${myProject.memberProjectEndDay}|"></div>
							</div>	
							<div th:text="|프로젝트 명 : ${myProject.memberProjectName}|"></div>
							<div th:text="|수행처 : ${myProject.memberProjectPlace}|"></div>
							<div>프로젝트 URL : <a th:href="${myProject.memberProjectUrl}">주소</a></div>
							<div th:text="|프로젝트 설명 : ${myProject.memberProjectDesc}|"></div>
							
							<!-- if 조건 데이터가 공백이면 파일없음 -->
							<div th:if="${myProject.memberFilesSaveName == '' || myProject.memberFilesSaveName == null} ">
								<div>첨부파일 : 파일없음</div>
							</div>
							<!-- else 조건 -->
							<div th:unless="${myProject.memberFilesSaveName == '' && myProject.memberFilesSaveName == null}">
								<div class="input-group">
									<div>첨부파일 : </div>
									<a href="#" th:text="|&nbsp; ${myProject.memberFilesSaveName}|"></a>
								</div>
							</div>
							
							<div  align="right" style="height: 100px; padding:20px"><button>수정</button> <button>삭제</button></div>
							<hr>
						</div>
						
						<!-- 팝업 화면 출력  -->
						<div class="modal" id="detailModal">
							<div class="modal-dialog modal-dialog-scrollable modal-dialog modal-lg">
								<div class="modal-content">
								
									<!-- Modal Header -->
									<div class="modal-header">
										<h2 class="modal-title">프로젝트 정보 입력</h2>
										<button type="button" class="close" data-dismiss="modal">×</button>
									</div>
									
									<!-- Modal body -->
									<div class="modal-body">
										<form class="BodyForm">
											
											<!-- 프로젝트 명 카드영역 시작 -->
											<div class="card">
												<div class="card-header"><h3>프로젝트 명</h3></div>
												<div class="card-body">
													<div><input type="text" id="memberProjectName" class="form-control"></div>
												</div>
											</div> <!-- 프로젝트 명 카드영역 끝 -->
											
											<!-- 수행처 카드영역 시작 -->
											<div class="card">
												<div class="card-header"><h3>수행처</h3></div>
												<div class="card-body">
													<div><input type="text" id="memberProjectPlace" class="form-control"></div>
												</div>
											</div> <!-- 수행처 카드영역 끝 -->
											
											<!-- 프로젝트 기간 -->
											<div class="card">
												<div class="card-header"><h3>프로젝트 기간</h3></div>
												<div class="card-body">
												<div>진행중<input id="memberProjectResult" type="checkbox"></div>
												<br>
													<div class="input-group">
														<!-- 프로젝트 시작 날짜 -->
														<input type="text" id="startYear" class="form-control col-sm-1"> <div style="padding: 8px 10px 10px 10px" th:text="년 "></div>
														
														<select id="startMonth" class="form-control col-sm-1">
															<!-- 스크립트 반복문으로 뿌려준다 01~12까지 뿌려준다 -->
														</select><div style="padding: 8px 10px 10px 10px" th:text="월 "></div>
														
														<select id="startDay" class="form-control col-sm-1">
															<!-- 스크립트 반복문으로 뿌려준다 01~31까지 뿌려준다 -->
														</select><div style="padding: 8px 10px 10px 10px" th:text="일 "></div>
														<!-- 프로젝트 시작 날짜 끝 -->
														
														<h4 id="range">&nbsp; ~ &nbsp;</h4>
														<!-- 프로젝트 종료 날짜 -->
														<input type="text" id="endYear" class="form-control col-sm-1"> <div id="Year" style="padding: 8px 10px 10px 10px" th:text="년 "></div>
														
														<select id="endMonth" class="form-control col-sm-1">
															<!-- 스크립트 반복문으로 뿌려준다 01~12까지 뿌려준다 -->
														</select> <div id="Month" style="padding: 8px 10px 10px 10px" th:text="월 "></div>
														
														<select id="endDay" class="form-control col-sm-1">
															<!-- 스크립트 반복문으로 뿌려준다 01~31까지 뿌려준다 -->
														</select> <div id="Day" style="padding: 8px 10px 10px 10px" th:text="일 "></div>
														<!-- 프로젝트 종료 날짜 끝 -->
														
														<!-- 프로젝트 설명 시작 -->
														<div class="card">
															<div class="card-header"><h3>설명</h3></div>
															<div class="card-body">
																								<!-- rows높이/cols넓이 -->
																<textarea id="memberProjectDesc" class="form-control" rows="4" cols="">
																</textarea>
															</div>
														</div> <!-- 프로젝트 설명 끝 -->
														
														<!-- 프로젝트 URL 시작 -->
														<div class="card">
															<div class="card-header"><h3>프로젝트 URL</h3></div>
															<div class="card-body">
																<div><input type="text" id="memberProjectUrl" class="form-control"></div>
															</div>
														</div> <!-- 프로젝트 URL 끝 -->
														
														
													</div>
												</div>
											</div> <!-- 프로젝트 기간 끝 -->

										</form>
									</div>	
									
									
									<!-- Modal footer -->
									<div class="modal-footer"> 
										<form id="FooterForm">
											<div class="input-group" style="margin: 0px 0px 0px 10px; padding: 0px 0px 0px 0px">
												<button id="saveBtn" type="button" class="btn btn-primary">저장</button>
												&nbsp;
												<button id="closeBtn" type="button" class="btn btn-light" data-dismiss="modal">취소</button> 
												<div id="memberFileInfo" hidden="hidden" th:value="수상이력정보"></div> <!-- 파일테이블에서 사용할 뷰쪽 타이틀정보 -->
											</div>
										</form>
									</div>	
									
								</div>
							</div>
						</div> <!-- 팝업창끝 -->
							 
					</div>
				</div>
			</div>
		</div>

			
		
	</th:block>
	
	<th:block layout:fragment="customJquery">
		<th:block th:include="layout/customJquery"></th:block>
	</th:block>
	
</html>
