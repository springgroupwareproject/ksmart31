<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/main">
	<th:block layout:fragment="customHead">
		<meta charset="UTF-8">
		<title>관리자 권한 관리</title>
		<th:block th:include="layout/customHead"></th:block>
		<!-- head에 들어가는 스타일시트 or 스크립트는 여기에 삽입 -->
		<!-- Single Switche 사용하기 위한 css-->
		<link rel="stylesheet" th:href="@{dist/css/custom.css}"> <!-- w3 적용 -->
		<script>
		/* $("input:checkbox:checked").length; 체크된 갯수 확인 */
		$(document).ready(function() {
			
			$.ajax({
				url : '/admin/adminSecurity/getAdminSecurity',
				type : 'get',
				success:function(data) {
					console.log('성공');
					console.log(data);
					
					$(data).each(function(i, item){
						$('#resultTable tbody').append('<tr class="tBodyClass">');
						
						$('#resultTable tbody').append('<td>'+item.memberLevelTitle+'</td>');
						$('#resultTable tbody').append('<td>'+item.adminName+'</td>');
						$('#resultTable tbody').append('<td>'+item.departmentName+'</td>');

						if(item.adminLevelManagement == 'Y') {
							$('#resultTable tbody').append('<td><input id="checkbox1'+i+'" name="checkname'+i+'" type="checkbox" checked="checked" </td>');
						} else {
							$('#resultTable tbody').append('<td><input id="checkbox1'+i+'" name="checkname'+i+'" type="checkbox"</td>');
						}
						
						if(item.adminLevelPersonnel == 'Y') {
							$('#resultTable tbody').append('<td><input id="checkbox2'+i+'" name="checkname'+i+'" type="checkbox" checked="checked" </td>');
						} else {
							$('#resultTable tbody').append('<td><input id="checkbox2'+i+'" name="checkname'+i+'" type="checkbox"</td>');
						}
						
						if(item.adminLevelFinance == 'Y') {
							$('#resultTable tbody').append('<td><input id="checkbox3'+i+'" name="checkname'+i+'" type="checkbox" checked="checked" </td>');
						} else {
							$('#resultTable tbody').append('<td><input id="checkbox3'+i+'" name="checkname'+i+'" type="checkbox"</td>');
						}
						if(item.adminLevelWorkflow == 'Y') {
							$('#resultTable tbody').append('<td><input id="checkbox4'+i+'" name="checkname'+i+'" type="checkbox" checked="checked" </td>');
						} else {
							$('#resultTable tbody').append('<td><input id="checkbox4'+i+'" name="checkname'+i+'" type="checkbox"</td>');
						}
						if(item.adminLevelData == 'Y') {
							$('#resultTable tbody').append('<td><input id="checkbox5'+i+'" name="checkname'+i+'" type="checkbox" checked="checked" </td>');
						} else {
							$('#resultTable tbody').append('<td><input id="checkbox5'+i+'" name="checkname'+i+'" type="checkbox"</td>');
						}
						if(item.adminLevelCooperation == 'Y') {
							$('#resultTable tbody').append('<td><input id="checkbox6'+i+'" name="checkname'+i+'" type="checkbox" checked="checked" </td>');
						} else {
							$('#resultTable tbody').append('<td><input id="checkbox6'+i+'" name="checkname'+i+'" type="checkbox"</td>');
						}
						if(item.adminLevelSecurity == 'Y') {
							$('#resultTable tbody').append('<td><input id="checkbox7'+i+'" name="checkname'+i+'" type="checkbox" checked="checked" </td>');
						} else {
							$('#resultTable tbody').append('<td><input id="checkbox7'+i+'" name="checkname'+i+'" type="checkbox"</td>');
						}
						if(item.adminLevelApprovalProcess == 'Y') {
							$('#resultTable tbody').append('<td><input id="checkbox8'+i+'" name="checkname'+i+'" type="checkbox" checked="checked" </td>');
						} else {
							$('#resultTable tbody').append('<td><input id="checkbox8'+i+'" name="checkname'+i+'" type="checkbox"</td>');
						}

						$('#resultTable').append('</tr>');
					});
				}
			});	
			
			
				
			$('#saveBtn').click(function() { // 저장 버튼 클릭시 
				console.log('저장버튼 클릭');
			
				let count = $('.tBodyClass').length;
				console.log('count : ' + count);
				
				let chkbox = new Array();
				let level = {};
			
				for(let i = 0; i<count ; i++){
					
					let adminLevelApprovalProcess = $('#checkbox1'+i+'').is(":checked");
					let adminLevelCooperation = $('#checkbox2'+i+'').is(":checked");
					let adminLevelData = $('#checkbox3'+i+'').is(":checked");
					let adminLevelFinance = $('#checkbox4'+i+'').is(":checked");
					let adminLevelManagement = $('#checkbox5'+i+'').is(":checked");
					let adminLevelPersonnel = $('#checkbox6'+i+'').is(":checked");
					let adminLevelSecurity = $('#checkbox7'+i+'').is(":checked");
					let adminLevelWorkflow = $('#checkbox8'+i+'').is(":checked");
					
					if(!adminLevelApprovalProcess) { 
						adminLevelApprovalProcess = 'N'; 
					} else { 
						adminLevelApprovalProcess = 'Y'; 
					}
					if(!adminLevelCooperation) { 
						adminLevelCooperation = 'N'; 
					} else { 
						adminLevelCooperation = 'Y'; 
					}
					if(!adminLevelData) { 
						adminLevelData = 'N'; 
					} else { 
						adminLevelData = 'Y'; 
					}
					if(!adminLevelFinance) { 
						adminLevelFinance = 'N'; 
					} else { 
						adminLevelFinance = 'Y'; 
					}
					if(!adminLevelManagement) { 
						adminLevelManagement = 'N'; 
					} else { 
						adminLevelManagement = 'Y'; 
					}
					if(!adminLevelPersonnel) { 
						adminLevelPersonnel = 'N'; 
					} else { 
						adminLevelPersonnel = 'Y'; 
					}
					if(!adminLevelSecurity) { 
						adminLevelSecurity = 'N'; 
					} else { 
						adminLevelSecurity = 'Y'; 
					}
					if(!adminLevelWorkflow) { 
						adminLevelWorkflow = 'N'; 
					} else { 
						adminLevelWorkflow = 'Y'; 
					}
					console.log('adminLevelApprovalProcess : '+adminLevelApprovalProcess);
					console.log('adminLevelCooperation : '+adminLevelCooperation);
					console.log('adminLevelData : '+adminLevelData);
					console.log('adminLevelFinance : '+adminLevelFinance);
					console.log('adminLevelManagement : '+adminLevelManagement);
					console.log('adminLevelPersonnel : '+adminLevelPersonnel);
					console.log('adminLevelSecurity : '+adminLevelSecurity);
					console.log('adminLevelWorkflow : '+adminLevelWorkflow);
					
					
					level = {
						adminLevelApprovalProcess : adminLevelApprovalProcess,
						adminLevelCooperation : adminLevelCooperation,
						adminLevelData :adminLevelData,
						adminLevelFinance : adminLevelFinance,
						adminLevelManagement : adminLevelManagement,
						adminLevelPersonnel : adminLevelPersonnel,
						adminLevelSecurity : adminLevelSecurity,
						adminLevelWorkflow : adminLevelWorkflow
					};
					console.log('level : '+level.adminLevelApprovalProcess);
					chkbox[i] = level;
					console.log('chkbox : '+chkbox);
					
				}	//  /for문 끝
				var jsonData = JSON.stringify(chkbox);
				jQeury.ajaxSettings.traditional=true;
				
				$.ajax({
					url : '/admin/adminSecurity/addAdminSecurity',
					type : 'get',
					data : {jsonData : jsonData},
					success:function(data) {
						console.log('성공');
						console.log(data);
					}
					
				});
				
			}); //  /save버튼  닫힘
				
		/* 	
			for(let i = 0; i<count ; i++){
					let adminLevelApprovalProcess = $('#checkbox'+i+'');
					let adminLevelCooperation = $('#checkbox'+i+'');
					let adminLevelData = $('#checkbox'+i+'');
					let adminLevelFinance = $('#checkbox'+i+'');
					let adminLevelManagement = $('#checkbox'+i+'');
					let adminLevelPersonnel = $('#checkbox'+i+'');
					let adminLevelSecurity = $('#checkbox'+i+'');
					let adminLevelWorkflow = $('#checkbox'+i+'');
					
					for(let i = 0; i<)
				
				
				}
			
				let adminLevel = {adminLevelApprovalProcess:adminLevelApprovalProcess,
								  adminLevelCooperation:adminLevelCooperation,
								  adminLevelData:adminLevelData,
								  adminLevelFinance:adminLevelFinance,
								  adminLevelManagement:adminLevelManagement,
								  adminLevelPersonnel:adminLevelPersonnel,
								  adminLevelSecurity:adminLevelSecurity,
								  adminLevelWorkflow:adminLevelWorkflow
				}
				
				levelList[i] = adminLevel;
				
			});
			 */
				
			
		});
		</script>
	</th:block>
	
	<!-- 본문 -->
	<th:block layout:fragment="customBody">
		<div class="page-header">
			<div class="page-header row align-items-end">
				<div class="col-lg-8">
					<div class="page-header-title">
						<i class="ik ik-layers bg-blue"></i>
						<div class="d-inline">
							<!-- 증명서 발급 - 증명서 신청 -->
							<h5>보안 관리 - 권한 설정</h5>
							<span>관리자에게 접근 권한을 부여합니다.</span>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		
		
	<!-- test -->
	<!--<div class="border-checkbox-section">
		    <div class="border-checkbox-group border-checkbox-group-primary">
		        <input class="border-checkbox" type="checkbox" id="checkbox1">
		        <label class="border-checkbox-label" for="checkbox1">Primary</label>
		    </div>
		</div> -->		
	           
	
	<div class="row">
		<div class="col-md-12">
		<!-- 부트스트립 적용 -->
		<div class="card">
	        <div class="card-header d-block">
	            <h3>관리자 권한 관리</h3>
	       		<span>이곳은 <code>관리자권한</code>을 부여관리 하는곳입니다.</span>
	            <div align="right">
					<button id="saveBtn" style="padding: 5px 10px 5px 10px; margin: 0px 0px 0px 0px;">저장</button>
		        </div>    
	        </div>
	        <div class="card-body p-0 table-border-style">
	            <div class="table-responsive">
	                <table class="table table-hover" id="resultTable">
	                
	                    <thead>
	                        <tr>
				   				<td>분류</td>	
				   				<td>이름</td>
				   				<td>부서</td>
				   				<td>조직 관리</td>
				   				<td>인사관리</td>
				   				<td>재무 관리</td>
				   				<td>워크플로우 관리</td>
				   				<td>데이터 관리</td>
				   				<td>협업 관리</td>
				   				<td>요금 결제 관리</td>
				   				<td>보안 관리</td>	
				   			</tr>
	                    </thead>
	                    
	                    <tbody>
							<!-- 값이 뿌려지는 곳 -->
	                    </tbody>
	                    
	                </table>
	            </div>
	        </div>
	    </div>
		</div>
	</div>
	
		
	</th:block>
	
	
	<th:block layout:fragment="customJquery">
		<th:block th:include="layout/customJquery"></th:block>
		<!-- 스크립트가 길어서  로딩 시간이 오래걸릴 경우 여기에 삽입 -->
		 <!-- Single Switche 사용하기 위한 js-->
        <script src="plugins/select2/dist/js/select2.min.js"></script>
        <script src="plugins/summernote/dist/summernote-bs4.min.js"></script>
        <script src="plugins/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"></script>
        <script src="plugins/jquery.repeater/jquery.repeater.min.js"></script>
        <script src="plugins/mohithg-switchery/dist/switchery.min.js"></script>
        <script src="js/form-advanced.js"></script>
    </th:block>
</html>
